import { describe, it, expect } from 'vitest';
import { EndangermentStatus, getSpeciesEndangerment } from './speciesVulnerability';

describe('getSpeciesEndangerment', () => {
    it('test known species', () => {
        describe.each([
            { species: 'bubo bubo', expected: EndangermentStatus.LC },
            { species: 'bubo scandiacus', expected: EndangermentStatus.VU },
            { species: 'charadrius mongolus', expected: EndangermentStatus.EN },
            { species: 'curruca undata', expected: EndangermentStatus.NT },
            { species: 'mypotis alcathoe', expected: EndangermentStatus.DD },
            { species: 'pinguinus impennis', expected: EndangermentStatus.EX },
            { species: 'tessellana tessellata', expected: EndangermentStatus.UNKNOWN },
            { species: 'vanellus gregarius', expected: EndangermentStatus.CR }
        ])('getSpeciesEndangerment', ({ species, expected }) => {
            expect(getSpeciesEndangerment(species)).toBe(expected);
        });
    });
    it('test missing species', () => {
        expect(getSpeciesEndangerment('')).toBe(EndangermentStatus.UNKNOWN);
        expect(getSpeciesEndangerment('made up species')).toBe(EndangermentStatus.UNKNOWN);
    });
    it('test unformatted species', () => {
        expect(getSpeciesEndangerment('Bubo bubo')).toBe(EndangermentStatus.LC);
        expect(getSpeciesEndangerment('Bubo Bubo ')).toBe(EndangermentStatus.LC);
        expect(getSpeciesEndangerment('  bubo Bubo')).toBe(EndangermentStatus.LC);
        expect(getSpeciesEndangerment('  bubo Bubo  ')).toBe(EndangermentStatus.LC);
    });
});
